{% load bootstrap4 %}
{% load static %}

<!DOCTYPE html>
<html>

	<head>
		<title>{% block title %}Главная{% endblock %} | {{ request.site.name }}</title>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
		<meta name="author" content="Shvetsov Dmitry">
		<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
		<link rel="stylesheet" type="text/css" href="{% static 'articles/css/style.css' %}">
		<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
		<script src="https://code.jquery.com/jquery-3.4.1.js" integrity="sha256-WpOohJOqMqqyKL9FccASB9O0KwACQJpFTUBLTYOVvVU=" crossorigin="anonymous"></script>
		<script src="https://code.jquery.com/jquery-migrate-3.0.0.min.js"></script>
		<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js" integrity="sha256-T0Vest3yCU7pafRw9r+settMBX6JkKN06dqBnpQ8d30=" crossorigin="anonymous"></script>
		<script src="https://getbootstrap.com/docs/4.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-xrRywqdh3PHs8keKZN+8zzc5TX0GRTLCcmivcbNJWm2rs5C8PRhcEn3czEjhAO9o" crossorigin="anonymous"></script>
		<link rel="stylesheet" href="//code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css">
  		<script src="//code.jquery.com/ui/1.11.4/jquery-ui.js"></script>
		<!-- Prevent closing dropdown when it's onclick -->
		<script type="text/javascript">
			$(function () {
        		$('.dropdown-toggle').dropdown();
        		$('.dropdown div').click(function (e) {
        			e.stopPropagation();
        		});
    		});
		</script>
	</head>

	<body>
		<header class="shadow">
			<nav class="navbar navbar-expand-lg navbar-dark shadow nav-bg">
			    <a class="navbar-brand" href="{% url 'articles:index' %}">{{ request.site.name }}</a>
			    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
			        <span class="navbar-toggler-icon"></span>
			    </button>
			    <div class="collapse navbar-collapse" id="navbarCollapse">
			        <div class="navbar-nav mr-auto">
			            <a class="nav-link nav-item" href="{% url 'articles:index' %}">Главная<span class="sr-only">(current)</span></a>

                        <div class="nav-item dropdown" id="profileDropdown">
                        	{% if request.user.is_authenticated %}
				            	<a class="dropdown-toggle nav-link " id="profileDropdownLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" href="#">{{ request.user.username }}</a>
			            	{% else %}
			            		<a class="dropdown-toggle nav-link" id="profileDropdownLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" href="#">Вход/Регистрация</a>
	            			{% endif %}
				            <div class="dropdown-menu ml-0 bg-light shadow" aria-labelledby="profileDropdownLink">
    	                        {% if request.user.is_authenticated %}
				            	<h3 class="dropdown-header">{{ request.user.username }}</h3>
						        <div class="dropdown-item">
				            		<a class="btn btn-outline-info btn-block d-flex justify-content-around align-items-center" href="{% url 'articles:profile' %}">
				            			<div class="col-5">
				            				Профиль 
				            			</div>
				            			<div class="col-1">
				            				<img src="https://img.icons8.com/dusk/48/000000/magazine.png">
				            			</div>
				            		</a>
						        </div>
						        <div class="dropdown-divider"></div>
						        <div class="dropdown-item">
						            <a class="btn btn-outline-secondary btn-block d-flex justify-content-around align-items-center" href="{% url 'articles:add_article' %}">
										<div class="col-5">
						            		Добавить статью
						            	</div>
						            	<div class="col-1">
						            		<svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="48" height="48" viewBox="0 0 192 192" style=" fill:#000000;"><g fill="none" fill-rule="nonzero" stroke="none" stroke-width="1" troke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10" stroke-dasharray="" stroke-dashoffset="0" font-family="none" font-weight="none" font-size="none" text-anchor="none" style="mix-blend-mode: normal"><path d="M0,192v-192h192v192z" fill="none" stroke="none"></path><g id="Layer_1" stroke="none"><g fill="#efc88e"><path d="M39,165h126v2.55c0,5.22 -4.23,9.45 -9.45,9.45h-6h-102.21c-4.605,0 -8.34,-3.735 -8.34,-8.34v-3.66z"></path></g><g fill="#efd8be"><path d="M165,21v138c0,3.315 -2.685,6 -6,6h-114c-3.243,0.165 -5.835,2.757 -6,6v-147c0,-4.971 4.029,-9 9,-9h111c3.315,0 6,2.685 6,6z"></path></g><g fill="#faefde"><rect x="27" y="15" transform="scale(3,3)" width="18" height="10"></rect></g><g fill="#8d6c9f"><path d="M96,93c0,-1.656 -1.344,-3 -3,-3h-12c-1.656,0 -3,1.344 -3,3c0,1.656 1.344,3 3,3h12c1.656,0 3,-1.344 3,-3z"></path></g><g fill="#8d6c9f"><path d="M135,90h-30c-1.656,0 -3,1.344 -3,3c0,1.656 1.344,3 3,3h30c1.656,0 3,-1.344 3,-3c0,-1.656 -1.344,-3 -3,-3z"></path></g><g fill="#8d6c9f"><path d="M129,102h-48c-1.656,0 -3,1.344 -3,3c0,1.656 1.344,3 3,3h48c1.656,0 3,-1.344 3,-3c0,-1.656 -1.344,-3 -3,-3z"></path></g><g fill="#8d6c9f"><path d="M123,114h-42c-1.656,0 -3,1.344 -3,3c0,1.656 1.344,3 3,3h42c1.656,0 3,-1.344 3,-3c0,-1.656 -1.344,-3 -3,-3z"></path></g><g fill="#8d6c9f"><path d="M159,12h-111c-6.627,0 -12,5.373 -12,12v6h-3c-4.971,0 -9,4.029 -9,9c0,4.971 4.029,9 9,9h3v6h-3c-4.971,0 -9,4.029 -9,9c0,4.971 4.029,9 9,9h3v6h-3c-4.971,0 -9,4.029 -9,9c0,4.971 4.029,9 9,9h3v6h-3c-4.971,0 -9,4.029 -9,9c0,4.971 4.029,9 9,9h3v6h-3c-4.971,0 -9,4.029 -9,9c0,4.971 4.029,9 9,9h3v27c0,4.971 4.029,9 9,9h114c4.971,0 9,-4.029 9,-9v-3.54v-146.46c0,-4.971 -4.029,-9 -9,-9zM33,42c-1.656,0 -3,-1.344 -3,-3c0,-1.656 1.344,-3 3,-3h3v6zM33,66c-1.656,0 -3,-1.344 -3,-3c0,-1.656 1.344,-3 3,-3h3v6zM33,90c-1.656,0 -3,-1.344 -3,-3c0,-1.656 1.344,-3 3,-3h3v6zM33,114c-1.656,0 -3,-1.344 -3,-3c0,-1.656 1.344,-3 3,-3h3v6zM33,138c-1.656,0 -3,-1.344 -3,-3c0,-1.656 1.344,-3 3,-3h3v6zM159,174h-114c-1.656,0 -3,-1.344 -3,-3c0,-2.19 2.49,-3 3,-3h117v3c0,1.656 -1.344,3 -3,3zM162,159c0,1.656 -1.344,3 -3,3h-114c-1.029,0.015 -2.046,0.219 -3,0.6v-6.6c1.656,0 3,-1.344 3,-3v-6c0,-1.656 -1.344,-3 -3,-3v-12h9c1.656,0 3,-1.344 3,-3c0,-1.656 -1.344,-3 -3,-3h-9v-18h9c1.656,0 3,-1.344 3,-3c0,-1.656 -1.344,-3 -3,-3h-9v-18h9c1.656,0 3,-1.344 3,-3c0,-1.656 -1.344,-3 -3,-3h-9v-18h9c1.656,0 3,-1.344 3,-3c0,-1.656 -1.344,-3 -3,-3h-9v-18h9c1.656,0 3,-1.344 3,-3c0,-1.656 -1.344,-3 -3,-3h-9v-6c0,-3.315 2.685,-6 6,-6h111c1.656,0 3,1.344 3,3v123c-1.656,0 -3,1.344 -3,3v6c0,1.656 1.344,3 3,3z"></path></g><g fill="#8d6c9f"><path d="M135,78h-54c-1.656,0 -3,-1.341 -3,-3v-30c0,-1.659 1.344,-3 3,-3h54c1.656,0 3,1.341 3,3v30c0,1.659 -1.344,3 -3,3zM84,72h48v-24h-48z"></path></g><g fill="#8d6c9f"><g><path d="M57,144c-1.656,0 -3,1.344 -3,3v6c0,1.656 1.344,3 3,3c1.656,0 3,-1.344 3,-3v-6c0,-1.656 -1.344,-3 -3,-3z"></path></g><g><path d="M72,144c-1.656,0 -3,1.344 -3,3v6c0,1.656 1.344,3 3,3c1.656,0 3,-1.344 3,-3v-6c0,-1.656 -1.344,-3 -3,-3z"></path></g><g><path d="M87,144c-1.656,0 -3,1.344 -3,3v6c0,1.656 1.344,3 3,3c1.656,0 3,-1.344 3,-3v-6c0,-1.656 -1.344,-3 -3,-3z"></path></g><g><path d="M102,144c-1.656,0 -3,1.344 -3,3v6c0,1.656 1.344,3 3,3c1.656,0 3,-1.344 3,-3v-6c0,-1.656 -1.344,-3 -3,-3z"></path></g><g><path d="M117,144c-1.656,0 -3,1.344 -3,3v6c0,1.656 1.344,3 3,3c1.656,0 3,-1.344 3,-3v-6c0,-1.656 -1.344,-3 -3,-3z"></path></g><g><path d="M132,144c-1.656,0 -3,1.344 -3,3v6c0,1.656 1.344,3 3,3c1.656,0 3,-1.344 3,-3v-6c0,-1.656 -1.344,-3 -3,-3z"></path></g><g><path d="M147,144c-1.656,0 -3,1.344 -3,3v6c0,1.656 1.344,3 3,3c1.656,0 3,-1.344 3,-3v-6c0,-1.656 -1.344,-3 -3,-3z"></path></g></g></g><g stroke="none"><g id="Layer_1"><path d="M189,141h-24v-24h-24v24h-24v24h24v24h24v-24h24z" fill="#72caaf"></path><path d="M165,192h-24c-1.656,0 -3,-1.344 -3,-3v-21h-21c-1.656,0 -3,-1.344 -3,-3v-24c0,-1.656 1.344,-3 3,-3h21v-21c0,-1.656 1.344,-3 3,-3h24c1.656,0 3,1.344 3,3v21h21c1.656,0 3,1.344 3,3v24c0,1.656 -1.344,3 -3,3h-21v21c0,1.656 -1.344,3 -3,3zM144,186h18v-21c0,-1.656 1.344,-3 3,-3h21v-18h-21c-1.656,0 -3,-1.344 -3,-3v-21h-18v21c0,1.656 -1.344,3 -3,3h-21v18h21c1.656,0 3,1.344 3,3z" fill="#8d6c9f"></path></g></g><path d="M114,192v-78h78v78z" id="overlay-drag" fill="#ff0000" stroke="none" opacity="0"></path></g></svg>
						            	</div>
						            </a>
						        </div>
						        <div class="dropdown-divider"></div>
				            	<div class="dropdown-item">
		            				<a href="{% url 'articles:logout' %}" class="btn btn-outline-danger btn-block d-flex justify-content-around align-items-center">
										<div class="col-5">
		            						Выход 
		            					</div>
		            					<div class="col-1">
		            						<img src="https://img.icons8.com/dusk/48/000000/exit.png" class="text-right">
		            					</div>
		            				</a>
				            	</div>
						        {% else %}
				            	<div class="dropdown-item">
				            		<a href="{% url 'articles:login' %}" class="btn btn-info btn-block">Вход <img src="https://img.icons8.com/dusk/32/000000/enter-2.png"> </a>
				            	</div>
				            	<div class="dropdown-item">
				            		<a href="{% url 'articles:register' %}" class="btn btn-info btn-block">Регистрация</a>
				            	</div>
				            	<div class="dropdown-divider"></div>
				            	<h6 class="dropdown-header">Войти с помощью</h6>
				            	<!-- <div style="position: absolute; left: 5%; bottom: 5%;">a</div> -->
				            	<div class="row d-flex flex-row justify-content-between container-fluid align-items-center">
				            		<div class="ml-2 col-1 auth-item">
				            			<a href="#">
				            				<img class="auth-icon" src="https://playntrade-a.akamaihd.net/jbimg/76f4f371fa2a487c5f7e26e5f6dd4c93.png" height="25">
				            			</a>
				            		</div>
				            		<div class="col-1 auth-item">
				            			<a href="#">
				            				<img class="auth-icon" src="http://cdn.onlinewebfonts.com/svg/download_190412.png" height="25">
				            			</a>
				            		</div>
				            		<div class="col-1 auth-item">
				            			<a href="#">
				            				<img class="auth-icon" src="https://cdn.pixabay.com/photo/2015/12/11/11/43/google-1088004_1280.png" height="25">
				            			</a>
				            		</div>
				            		<div class="col-1 auth-item">
				            			<a href="#">
				            				<img class="auth-icon" src="https://habr.com/images/favicons/favicon-32x32.png" class="shadow border" height="25">
				            			</a>
				            		</div>
				            	</div>
				            	{% endif %}
				            	<!-- <div style="position: absolute; right: 5%; bottom: 5%;">a</div> -->
				            </div>
				        </div>
			        </div>
			        <form class="form-inline mt-2 mt-md-0">
	        			<input class="form-control mr-sm-2" type="text" placeholder="Поиск" aria-label="Search">
			        	<button class="btn btn-outline-success my-2 my-sm-0" type="submit">Поиск</button>
			        </form>
			    </div>
			</nav>
		</header>
		{% bootstrap_messages %}
		<div class="row content">
			<div class="col-light col-xs-6 col-sm-12 col-md-12 col-lg-3 text-center pr-0">
				<nav class="navbar navbar-expand-lg navbar-dark p-0 d-block">
		    		<h3 class="text-white py-3 px-1 shadow text-header-hl d-none d-lg-block d-md-none text-shadow-md">Популярные статьи</h3>
		    		<div class="navbar-toggler w-100 bg-dark" type="button" data-toggle="collapse" data-target="#articlesCollapse" aria-controls="articlesCollapse" aria-expanded="false" aria-label="Toggle navigation">
		    			<h3 class="text-white py-3 shadow text-header-hl"><span class="navbar-toggler-icon"></span>Популярные статьи</h3>
		    		</div>
		    		<div class="collapse navbar-collapse flex-column w-100 nabvbar-nav" id="articlesCollapse">
						<div class="col-light text-white list-unstyled shadow p-2 text-body-hl w-100">
                            {% for article in rate_articles %}
                                {% url 'articles:article' pk=article.pk as url %}
								<a class="my-1 nav-item nav-link btn btn-secondary" href="{{ url }}{{ all }}">{{ article.title }}</a>
                            {% endfor %}
						</div>
					</div>
				</nav>
			</div> <!-- /col-light -->

			<div class="col-md-12 col-lg-9 col-dark pr-0 pl-lg-0 ml-md-0">
				<main role="main">
                    {% block content %}
					<!-- Main content -->
                    {% endblock %}
				</main>
			</div>

		</div> <!-- /row content -->

		<footer class="page-footer font-small text-white pt-4 footer-bg">
			<div class="container-fluid text-center text-md-left">
				<div class="row">
					<div class="col-md-6 mt-md-0 mt-3">
						<h5 class="text-uppercase text-shadow-sm">Содержимое</h5>
						<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
					</div>
					<!-- /Footer text -->
					<hr class="clearfix w-100 d-md-none pb-3">
					<!-- Footer links -->
					<div class="col-md-3 mb-md-0 mb-3">
						<h5 class="text-uppercase text-shadow-sm">Links</h5>
						<ul class="list-unstyled">
							<li><a href="#">Ссылка 1</a></li>
							<li><a href="#">Ссылка 2</a></li>
							<li><a href="#">Ссылка 3</a></li>
							<li><a href="#">Ссылка 4</a></li>
						</ul>
					</div>
					<!-- /Footer links -->
				</div> <!-- /row -->
			</div> <!-- /container-fluid -->
			<!-- Copyright -->
			<div class="footer-copyright text-center py-2 nav-bg">
				<!-- style="background-color: #1C2331" -->
				&copy; 2019 Copyright: <a href="#"> Shvetsov Dmitry</a>
			</div>
			<!-- /Copyright -->
		</footer>

	</body>
</html>